<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Alphabet Quiz - Accessible Learning</title>
  <style>
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }

    body {
        font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        color: #333;
        line-height: 1.6;
    }

    .header {
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(20px);
        border-bottom: 1px solid rgba(255, 255, 255, 0.2);
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        padding: 24px 20px;
        text-align: center;
        position: relative;
        overflow: hidden;
    }

    .header::before {
        content: '';
        position: absolute;
        top: -50%;
        left: -50%;
        width: 200%;
        height: 200%;
        background: radial-gradient(circle, rgba(102, 126, 234, 0.1) 0%, transparent 70%);
        animation: pulse 4s ease-in-out infinite;
    }

    @keyframes pulse {
        0%, 100% { transform: scale(1) rotate(0deg); opacity: 0.3; }
        50% { transform: scale(1.1) rotate(5deg); opacity: 0.6; }
    }

    .header h1 {
        font-size: 2.5rem;
        font-weight: 700;
        color: #4338ca;
        margin-bottom: 8px;
        position: relative;
        z-index: 2;
        text-shadow: 0 2px 4px rgba(67, 56, 202, 0.1);
    }

    .header .emoji {
        font-size: 3rem;
        margin-right: 12px;
        animation: bounce 2s ease-in-out infinite;
    }

    @keyframes bounce {
        0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
        40% { transform: translateY(-10px); }
        60% { transform: translateY(-5px); }
    }

    .instruction-bar {
        background: linear-gradient(135deg, #1e293b, #334155);
        padding: 20px;
        text-align: center;
        position: relative;
        overflow: hidden;
    }

    .instruction-bar::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
        animation: shimmer 3s ease-in-out infinite;
    }

    @keyframes shimmer {
        0% { left: -100%; }
        50% { left: 100%; }
        100% { left: 100%; }
    }

    .instruction-bar h2 {
        color: #f1f5f9;
        font-size: 1.25rem;
        font-weight: 500;
        position: relative;
        z-index: 2;
    }

    .instruction-icon {
        display: inline-block;
        margin-right: 12px;
        font-size: 1.5rem;
        animation: glow 2s ease-in-out infinite alternate;
    }

    @keyframes glow {
        from { text-shadow: 0 0 5px #60a5fa, 0 0 10px #60a5fa; }
        to { text-shadow: 0 0 10px #60a5fa, 0 0 20px #60a5fa; }
    }

    .container {
        display: flex;
        justify-content: center;
        align-items: center;
        padding: 40px 20px;
        min-height: calc(100vh - 200px);
    }

    .quiz-container {
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(20px);
        border-radius: 24px;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.15);
        border: 1px solid rgba(255, 255, 255, 0.2);
        padding: 40px;
        width: 100%;
        max-width: 700px;
        position: relative;
        overflow: hidden;
    }

    .quiz-container::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 4px;
        background: linear-gradient(90deg, #6366f1, #8b5cf6, #ec4899);
        animation: progressBar 2s ease-in-out infinite;
    }

    @keyframes progressBar {
        0% { transform: translateX(-100%); }
        100% { transform: translateX(100%); }
    }

    .quiz-title {
        text-align: center;
        margin-bottom: 32px;
        position: relative;
        z-index: 2;
    }

    .quiz-title h3 {
        font-size: 1.75rem;
        font-weight: 600;
        color: #374151;
        margin-bottom: 8px;
    }

    .quiz-subtitle {
        color: #6b7280;
        font-size: 1rem;
        margin-bottom: 24px;
    }

    .questions-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 20px;
        margin-bottom: 32px;
    }

    .question-item {
        background: linear-gradient(135deg, #f8fafc, #f1f5f9);
        border: 2px solid #e2e8f0;
        border-radius: 16px;
        padding: 20px;
        transition: all 0.3s ease;
        position: relative;
        overflow: hidden;
    }

    .question-item::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 3px;
        background: linear-gradient(90deg, #6366f1, #8b5cf6);
        transform: scaleX(0);
        transition: transform 0.3s ease;
    }

    .question-item:focus-within {
        border-color: #6366f1;
        box-shadow: 0 0 0 4px rgba(99, 102, 241, 0.1);
        transform: translateY(-2px);
    }

    .question-item:focus-within::before {
        transform: scaleX(1);
    }

    .question-label {
        font-weight: 600;
        color: #4338ca;
        margin-bottom: 12px;
        display: flex;
        align-items: center;
        gap: 8px;
    }

    .question-number {
        background: linear-gradient(135deg, #6366f1, #8b5cf6);
        color: white;
        width: 28px;
        height: 28px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 14px;
        font-weight: 700;
    }

    .answer-input {
        width: 100%;
        padding: 16px;
        font-size: 24px;
        font-weight: 600;
        text-align: center;
        border: 2px solid #e5e7eb;
        border-radius: 12px;
        background: white;
        transition: all 0.3s ease;
        outline: none;
        text-transform: uppercase;
    }

    .answer-input:focus {
        border-color: #6366f1;
        background: #fefefe;
        box-shadow: 0 0 0 4px rgba(99, 102, 241, 0.1);
        transform: scale(1.02);
    }

    .answer-input:valid {
        border-color: #10b981;
        background: linear-gradient(135deg, #f0fdf4, #dcfce7);
    }

    .controls {
        display: flex;
        gap: 16px;
        justify-content: center;
        flex-wrap: wrap;
        margin-bottom: 24px;
    }

    .btn {
        padding: 16px 32px;
        font-size: 16px;
        font-weight: 600;
        border: none;
        border-radius: 12px;
        cursor: pointer;
        transition: all 0.3s ease;
        position: relative;
        overflow: hidden;
        min-width: 140px;
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }

    .btn::before {
        content: '';
        position: absolute;
        top: 50%;
        left: 50%;
        width: 0;
        height: 0;
        background: rgba(255, 255, 255, 0.3);
        border-radius: 50%;
        transition: all 0.4s ease;
        transform: translate(-50%, -50%);
    }

    .btn:active::before {
        width: 300px;
        height: 300px;
    }

    .btn-primary {
        background: linear-gradient(135deg, #6366f1, #8b5cf6);
        color: white;
        box-shadow: 0 4px 15px rgba(99, 102, 241, 0.3);
    }

    .btn-primary:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(99, 102, 241, 0.4);
    }

    .btn-secondary {
        background: linear-gradient(135deg, #f59e0b, #f97316);
        color: white;
        box-shadow: 0 4px 15px rgba(245, 158, 11, 0.3);
    }

    .btn-secondary:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(245, 158, 11, 0.4);
    }

    .result {
        text-align: center;
        font-size: 1.5rem;
        font-weight: 700;
        padding: 24px;
        border-radius: 16px;
        margin-top: 24px;
        background: linear-gradient(135deg, #ecfdf5, #d1fae5);
        border: 2px solid #10b981;
        color: #047857;
        opacity: 0;
        transform: translateY(20px);
        transition: all 0.5s ease;
    }

    .result.show {
        opacity: 1;
        transform: translateY(0);
    }

    .result-icon {
        font-size: 2rem;
        margin-bottom: 8px;
        display: block;
        animation: celebration 1s ease-in-out infinite alternate;
    }

    @keyframes celebration {
        from { transform: scale(1) rotate(-5deg); }
        to { transform: scale(1.1) rotate(5deg); }
    }

    .audio-indicator {
        position: fixed;
        top: 20px;
        right: 20px;
        background: linear-gradient(135deg, #6366f1, #8b5cf6);
        color: white;
        padding: 12px 20px;
        border-radius: 25px;
        box-shadow: 0 4px 15px rgba(99, 102, 241, 0.3);
        font-weight: 600;
        opacity: 0;
        transform: translateY(-10px);
        transition: all 0.3s ease;
        z-index: 1000;
    }

    .audio-indicator.show {
        opacity: 1;
        transform: translateY(0);
    }

    .audio-wave {
        display: inline-block;
        width: 4px;
        height: 16px;
        background: white;
        margin: 0 2px;
        border-radius: 2px;
        animation: wave 1.2s ease-in-out infinite;
    }

    .audio-wave:nth-child(2) { animation-delay: 0.1s; }
    .audio-wave:nth-child(3) { animation-delay: 0.2s; }
    .audio-wave:nth-child(4) { animation-delay: 0.3s; }

    @keyframes wave {
        0%, 100% { transform: scaleY(1); }
        50% { transform: scaleY(2); }
    }

    /* Accessibility improvements */
    @media (prefers-reduced-motion: reduce) {
        *, *::before, *::after {
            animation-duration: 0.01ms !important;
            animation-iteration-count: 1 !important;
            transition-duration: 0.01ms !important;
        }
    }

    /* High contrast mode support */
    @media (prefers-contrast: high) {
        .quiz-container {
            background: white;
            border: 3px solid black;
        }
        
        .answer-input {
            border: 3px solid black;
        }
        
        .btn {
            border: 2px solid black;
        }
    }

    /* Responsive design */
    @media (max-width: 768px) {
        .header h1 {
            font-size: 2rem;
        }
        
        .quiz-container {
            padding: 24px;
            margin: 20px;
        }
        
        .questions-grid {
            grid-template-columns: 1fr;
            gap: 16px;
        }
        
        .controls {
            flex-direction: column;
            align-items: stretch;
        }
        
        .btn {
            width: 100%;
        }
    }

    @media (max-width: 480px) {
        .header {
            padding: 16px;
        }
        
        .header h1 {
            font-size: 1.75rem;
        }
        
        .instruction-bar h2 {
            font-size: 1rem;
        }
        
        .quiz-container {
            padding: 20px;
        }
        
        .answer-input {
            font-size: 20px;
            padding: 12px;
        }
    }
  </style>
</head>
<body>
  <div class="header">
    <h1>Alphabet Quiz <span class="emoji" role="img" aria-label="ABC">📚</span></h1>
  </div>
  <div class="instruction-bar">
    <h2>Type the Letter You Hear. Use Enter or Arrow Keys to Navigate.</h2>
  </div>
  <div class="container">
    <form id="quizForm">
      <div class="quiz-container">
        <div style="text-align:right; margin-bottom:16px;">
          <button class="btn btn-secondary" type="button" onclick="returnToMenu()">⬅️ Return to Quiz Menu</button>
        </div>
        <div class="quiz-title">
          <h3>Alphabet Listening Quiz</h3>
        </div>
        <div class="questions-grid">
          <div class="question-item" tabindex="0">
            <label for="ans1" class="question-label">Question 1: <span class="question-number">1</span></label>
            <input type="text" id="ans1" maxlength="1" placeholder="Enter the letter" class="answer-input">
          </div>
          <div class="question-item" tabindex="0">
            <label for="ans2" class="question-label">Question 2: <span class="question-number">2</span></label>
            <input type="text" id="ans2" maxlength="1" placeholder="Enter the letter" class="answer-input">
          </div>
          <div class="question-item" tabindex="0">
            <label for="ans3" class="question-label">Question 3: <span class="question-number">3</span></label>
            <input type="text" id="ans3" maxlength="1" placeholder="Enter the letter" class="answer-input">
          </div>
          <div class="question-item" tabindex="0">
            <label for="ans4" class="question-label">Question 4: <span class="question-number">4</span></label>
            <input type="text" id="ans4" maxlength="1" placeholder="Enter the letter" class="answer-input">
          </div>
          <div class="question-item" tabindex="0">
            <label for="ans5" class="question-label">Question 5: <span class="question-number">5</span></label>
            <input type="text" id="ans5" maxlength="1" placeholder="Enter the letter" class="answer-input">
          </div>
          <div class="question-item" tabindex="0">
            <label for="ans6" class="question-label">Question 6: <span class="question-number">6</span></label>
            <input type="text" id="ans6" maxlength="1" placeholder="Enter the letter" class="answer-input">
          </div>
          <div class="question-item" tabindex="0">
            <label for="ans7" class="question-label">Question 7: <span class="question-number">7</span></label>
            <input type="text" id="ans7" maxlength="1" placeholder="Enter the letter" class="answer-input">
          </div>
          <div class="question-item" tabindex="0">
            <label for="ans8" class="question-label">Question 8: <span class="question-number">8</span></label>
            <input type="text" id="ans8" maxlength="1" placeholder="Enter the letter" class="answer-input">
          </div>
          <div class="question-item" tabindex="0">
            <label for="ans9" class="question-label">Question 9: <span class="question-number">9</span></label>
            <input type="text" id="ans9" maxlength="1" placeholder="Enter the letter" class="answer-input">
          </div>
          <div class="question-item" tabindex="0">
            <label for="ans10" class="question-label">Question 10: <span class="question-number">10</span></label>
            <input type="text" id="ans10" maxlength="1" placeholder="Enter the letter" class="answer-input">
          </div>
        </div>
        <div class="controls">
          <button type="button" id="replayBtn" class="btn btn-primary">Replay Audio</button>
          <button type="button" id="submitBtn" class="btn btn-secondary">Submit</button>
        </div>
        <div id="result" class="result"></div>
      </div>
    </form>
  </div>

<script>
  let correctAnswers = [];

  function generateRandomLetters(count) {
    const alphabet = 'abcdefghijklmnopqrstuvwxyz'.split('');
    const randomLetters = [];

    while (randomLetters.length < count) {
      const index = Math.floor(Math.random() * alphabet.length);
      const letter = alphabet[index];
      if (!randomLetters.includes(letter)) {
        randomLetters.push(letter);
      }
    }
    return randomLetters;
  }

  function speakLetter(letter) {
    return new Promise((resolve, reject) => {
      if ('speechSynthesis' in window) {
        const utterance = new SpeechSynthesisUtterance(letter);
        utterance.rate = 0.7;
        utterance.onend = resolve;
        utterance.onerror = reject;
        window.speechSynthesis.speak(utterance);
      } else {
        reject(new Error('Speech synthesis not supported'));
      }
    });
  }

  async function speakQuestions() {
    window.speechSynthesis.cancel();
    try {
      for (const letter of correctAnswers) {
        await speakLetter(letter);
        await new Promise(resolve => setTimeout(resolve, 700));
      }
    } catch (error) {
      console.error('Error speaking letters:', error);
    }
  }

  function checkAnswers() {
    let score = 0;
    for (let q = 0; q < correctAnswers.length; q++) {
      let userAnswer = document.getElementById("ans" + (q + 1)).value.trim().toLowerCase();
      if (userAnswer === correctAnswers[q]) {
        score += 10;
      }
    }

    const resultDiv = document.getElementById("result");
    resultDiv.innerText = `Your Score: ${score}/10`;

    // Store the score in a hidden span for returnToMenu
    let currentScoreSpan = document.getElementById("currentScore");
    if (!currentScoreSpan) {
      currentScoreSpan = document.createElement("span");
      currentScoreSpan.id = "currentScore";
      currentScoreSpan.style.display = "none";
      document.body.appendChild(currentScoreSpan);
    }
    currentScoreSpan.innerText = score;

    const scoreUtterance = new SpeechSynthesisUtterance(`Your score is ${score} out of 10`);
    window.speechSynthesis.speak(scoreUtterance);
  }

  function initializeQuiz() {
    correctAnswers = generateRandomLetters(10);
    console.log("Correct Answers:", correctAnswers); // For testing

    document.body.addEventListener('click', function initSpeech() {
      speakQuestions();
      document.body.removeEventListener('click', initSpeech);
    });

    document.getElementById('replayBtn').addEventListener('click', speakQuestions);
    document.getElementById('submitBtn').addEventListener('click', checkAnswers);

    const inputs = document.querySelectorAll('input');
    inputs.forEach((input, index) => {
      input.addEventListener('keydown', (event) => {
        if (event.key === 'Enter' || event.key === 'ArrowDown') {
          event.preventDefault();
          if (index < inputs.length - 1) {
            inputs[index + 1].focus();
          }
        } else if (event.key === 'ArrowUp') {
          event.preventDefault();
          if (index > 0) {
            inputs[index - 1].focus();
          }
        }
      });
    });

    inputs[0].focus();
  }

  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initializeQuiz);
  } else {
    initializeQuiz();
  }

  
  function returnToMenu() {
  const scoreSpan = document.getElementById('currentScore');
  const score = scoreSpan ? parseInt(scoreSpan.innerText) : 0;

  let games = JSON.parse(sessionStorage.getItem("games")) || {};
  games["Alphabet Quiz"] = score;
  sessionStorage.setItem("games", JSON.stringify(games));

  window.location.href = "index.html";
}

</script>

</body>
</html>
